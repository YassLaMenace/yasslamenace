<!DOCTYPE html>
<html>
<head>
	<title>Ping-Pong2J</title>
	<link rel="stylesheet" href="Pong2J.css">
	<meta charset="utf-8">
	<script type="text/javascript" src="P5Projet.js"></script>
	<script type="text/javascript">
		var B1;
		var B2;
		var bal;
		var delta1;
		var delta2;
		var run;
		var A;
		var find,fing;
		function setup()
		{
			
			createCanvas(680,440);
			background(51,51,51);
			initJeu()
			stroke(250,250,250);
			line(width/2,0,width/2,height);
		}
		function initJeu()
		{
			
			run=false;
			find=false;
			fing=false;
			bal={x:width/2,y:height/2, vx:10,vy:10, r:20};
			B1={x:width-50,y:180};
			B2={x:50, y:180};
			delta1=0;
			delta2=0;	
			afficheballe();
			affichebarre();
		}
		function deplaceBarre()
		{
			B1.y=B1.y+delta1;
			if (B1.y>height-80) B1.y=height-82;
			if (B1.y<0) B1.y=0;
			B2.y=B2.y+delta2;
			if (B2.y>height-80) B2.y=height-82;
			if (B2.y<0) B2.y=0;
			
		}
		function draw()
		{
			if((run==true)&&(find==false)&&(fing==false))
			{	
			deplaceballe();
			B1.y=B1.y+delta1;
			B2.y=B2.y+delta2;
			afficheballe();
			affichebarre();
			deplaceBarre();
			stroke(250,250,250);
			line(width/2,0,width/2,height);
			}
			if (find==true) 
			{
				findroite();
			}
			if (fing==true) 
			{
				fingauche();
			}
		}
		function findroite()
		{
			fill(255,255,0);
			textSize(90);
			text("P1 WIN",width/4,height/2);
			
		}
		function fingauche()
		{
			fill(255,0,255);
			textSize(90);
			text("P2 WIN",width/4,height/2);
		}

		function afficheballe()
		{
			background(29,29,29);
			fill(255,255,255);
			ellipse(bal.x,bal.y,20,20);
		}
		function affichebarre()
		{
	    	fill(255,0,255);
	    	rect(B1.x,B1.y,10,80);
	    	fill(255,255,0);
	    	rect(B2.x,B2.y,10,80);	
	    	
		}
		function deplaceballe()
		{
			bal.x=bal.x+bal.vx
			bal.y=bal.y+bal.vy
			if ((interRectCercle(B1.x,B1.y,10,80,bal.x,bal.y,20)==true)&&(bal.vx>0))
				{
				bal.vx=-bal.vx;
				}
			if ((interRectCercle(B2.x,B2.y,10,80,bal.x,bal.y,20)==true)&&(bal.vx<0))
				{
				bal.vx=-bal.vx;
				}
			if ((bal.y>height-bal.r)||(bal.y<bal.r)) bal.vy=-bal.vy;
			if (bal.x<-bal.r) fing=true;
			if (bal.x>width+bal.r) find=true;
		}
		function keyPressed()
		{
			if(keyCode==32) run=true;
			if(keyCode==79) delta1=-10;
			if(keyCode==76) delta1=10;
			if(keyCode==90) delta2=-10;
			if(keyCode==83) delta2=10;
		}
		function keyReleased()
		{
			
			if(keyCode==79) delta1=0;
			if(keyCode==76) delta1=0;
			if(keyCode==90) delta2=0;
			if(keyCode==83) delta2=0;
		}
		

	</script>
	<link rel="icon" type="image/png" href="kirua.jpg">
</head>
<body>
<h1>Ping-Pong 2 Joueur</h1>
<h2>Appuyer sur espace pour commencer Ã  jouer<h2>

<h4>Player 1: Z pour monter S pour descendre.</h5>
<h4>Player 2: O pour monter L pour descendre.</h5>
	<div>
		    <div id="banniere" style="margin-left:auto; margin-right:auto; text-align:center; background:orange no-repeat center center; width:width; height: 50px;">

		    	<div id="text3">
				<a href="page.html">Accueil</a>
				
				
			</div>
		<div>
			
			<a href="javascript:document.location.href='Pong2J.html'">Restart</a>

		</div>
</body>
</html>